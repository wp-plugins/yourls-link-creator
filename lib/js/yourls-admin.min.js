function yourlsMessage(s,e){jQuery("div#wpbody h2:first").after('<div id="message" class="'+s+' below-h2"><p>'+e+"</p></div>")}jQuery(document).ready(function(s){s.fn.divExists=function(s){var e=[].slice.call(arguments,1);return this.length&&s.call(this,e),this};var e="",r="",i="",t="",o="",a="",n="";s("div.yourls-sidebox").on("click","a.admin-twitter-link",function(){return s(window).width()>765?(e=s(this).attr("href"),window.open(e,"social-share-dialog","width=626,height=436"),!1):void 0}),s("div.yourls-sidebox").find("a.external").attr("target","_blank"),s("tr.setting-item-types").divExists(function(){r=s(this).find("input#yourls-cpt").is(":checked"),r===!0&&s("tr.secondary").show(),r===!1&&(s("tr.secondary").hide(),s("tr.secondary").find("input:checkbox").prop("checked",!1)),s("tr.setting-item-types").on("change","input#yourls-cpt",function(){r=s(this).is(":checked"),r===!0&&s("tr.secondary").fadeIn(700),r===!1&&(s("tr.secondary").fadeOut(700),s("tr.secondary").find("input:checkbox").prop("checked",!1))})}),s("div#yourls-post-display").on("click","input.yourls-api",function(){if(a=s(this).data("post-id"),n=s(this).data("nonce"),""!==a&&""!==n){s("div#wpbody div#message").remove(),s("div#wpbody div#setting-error-settings_updated").remove(),s("div#yourls-post-display").find("span.yourls-spinner").css("visibility","visible"),s("div#yourls-post-display").find("input.yourls-api").attr("disabled","disabled"),o=s("div#yourls-post-display").find("input.yourls-keyw").val();var e={action:"create_yourls",keyword:o,post_id:a,nonce:n};jQuery.post(ajaxurl,e,function(e){s("div#yourls-post-display").find("span.yourls-spinner").css("visibility","hidden"),s("div#yourls-post-display").find("input.yourls-api").removeAttr("disabled");var r;try{r=jQuery.parseJSON(e)}catch(i){yourlsMessage("error",yourlsAdmin.defaultError)}r.success===!0?yourlsMessage("updated",r.message):r.success===!1&&null!==r.message?yourlsMessage("error",r.message):yourlsMessage("error",yourlsAdmin.defaultError),r.success===!0&&null!==r.linkbox&&(s("div#yourls-post-display").find("p.yourls-submit-block").remove(),s("div#yourls-post-display").find("p.yourls-input-block").replaceWith(r.linkbox),s("div#edit-slug-box").append('<input type="hidden" value="'+r.linkurl+'" id="shortlink">'),s("div#edit-slug-box").append(yourlsAdmin.shortSubmit))})}}),s("div#yourls-post-display").on("click","span.yourls-delete",function(){if(a=s(this).data("post-id"),n=s(this).data("nonce"),""!==a&&""!==n){s("div#wpbody div#message").remove(),s("div#wpbody div#setting-error-settings_updated").remove();var e={action:"delete_yourls",post_id:a,nonce:n};jQuery.post(ajaxurl,e,function(e){var r;try{r=jQuery.parseJSON(e)}catch(i){yourlsMessage("error",yourlsAdmin.defaultError)}r.success===!0?yourlsMessage("updated",r.message):r.success===!1&&null!==r.message?yourlsMessage("error",r.message):yourlsMessage("error",yourlsAdmin.defaultError),r.success===!0&&null!==r.yourlsbox&&(s("div#yourls-post-display").find("p.howto").remove(),s("div#yourls-post-display").find("p.yourls-exist-block").replaceWith(r.linkbox),s("div#edit-slug-box").find("input#shortlink").remove(),s("div#edit-slug-box").find('a:contains("Get Shortlink")').remove())})}}),s("div.row-actions").on("click","a.yourls-admin-update",function(e){if(e.preventDefault(),n=s(this).data("nonce"),""!==n&&(a=s(this).data("post-id"),""!==a)){t=s(this).parents("div.row-actions"),i=s(this).parents("tr.entry").find("td.yourls-click");var r={action:"stats_yourls",post_id:a,nonce:n};jQuery.post(ajaxurl,r,function(s){t.removeClass("visible");var e;try{e=jQuery.parseJSON(s)}catch(r){return!1}e.success===!0&&null!==e.clicknm&&i.find("span").text(e.clicknm)})}}),s("div.row-actions").on("click","a.yourls-admin-create",function(e){if(e.preventDefault(),n=s(this).data("nonce"),""!==n&&(a=s(this).data("post-id"),""!==a)){t=s(this).parents("div.row-actions"),i=s(this).parents("div.row-actions").find("span.create-yourls");var r={action:"inline_yourls",post_id:a,nonce:n};jQuery.post(ajaxurl,r,function(s){t.removeClass("visible");var e;try{e=jQuery.parseJSON(s)}catch(r){return!1}e.success===!0&&null!==e.rowactn&&i.replaceWith(e.rowactn)})}}),s("div#yourls-data-refresh").on("click","input.yourls-click-updates",function(){if(n=s("input#yourls_refresh").val(),""!==n){s("div#wpbody div#message").remove(),s("div#wpbody div#setting-error-settings_updated").remove(),s("div#yourls-data-refresh").find("span.yourls-refresh-spinner").css("visibility","visible"),s("div#yourls-data-refresh").find("input.yourls-click-updates").attr("disabled","disabled");var e={action:"refresh_yourls",nonce:n};jQuery.post(ajaxurl,e,function(e){s("div#yourls-data-refresh").find("span.yourls-refresh-spinner").css("visibility","hidden"),s("div#yourls-data-refresh").find("input.yourls-click-updates").removeAttr("disabled");var r;try{r=jQuery.parseJSON(e)}catch(i){yourlsMessage("error",yourlsAdmin.defaultError)}r.success===!0&&""!==r.message?yourlsMessage("updated",r.message):r.success===!1&&null!==r.message?yourlsMessage("error",r.message):yourlsMessage("error",yourlsAdmin.defaultError)})}}),s("div#yourls-data-refresh").on("click","input.yourls-convert",function(){if(n=s("input#yourls_convert").val(),""!==n){s("div#wpbody div#message").remove(),s("div#wpbody div#setting-error-settings_updated").remove(),s("div#yourls-data-refresh").find("span.yourls-convert-spinner").css("visibility","visible"),s("div#yourls-data-refresh").find("input.yourls-convert").attr("disabled","disabled");var e={action:"convert_yourls",nonce:n};jQuery.post(ajaxurl,e,function(e){s("div#yourls-data-refresh").find("span.yourls-convert-spinner").css("visibility","hidden"),s("div#yourls-data-refresh").find("input.yourls-convert").removeAttr("disabled");var r;try{r=jQuery.parseJSON(e)}catch(i){yourlsMessage("error",yourlsAdmin.defaultError)}r.success===!0&&""!==r.message?yourlsMessage("updated",r.message):r.success===!1&&null!==r.message?yourlsMessage("error",r.message):yourlsMessage("error",yourlsAdmin.defaultError)})}})});
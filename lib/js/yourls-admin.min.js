function yourlsMessage(a,b){jQuery("div#wpbody h2:first").after('<div id="message" class="'+a+' below-h2"><p>'+b+"</p></div>")}jQuery(document).ready(function(a){a.fn.divExists=function(a){var b=[].slice.call(arguments,1);return this.length&&a.call(this,b),this};var b="",c="",d="",e="",f="",g="",h="";a("div.yourls-sidebox").on("click","a.admin-twitter-link",function(){return a(window).width()>765?(b=a(this).attr("href"),window.open(b,"social-share-dialog","width=626,height=436"),!1):void 0}),a("td.apikey-field-wrapper").divExists(function(){a("input#yourls-api").hidePassword(!1),a("td.apikey-field-wrapper").on("click","span.password-toggle",function(){a(this).hasClass("password-visible")?(a(this).removeClass("password-visible"),a("input#yourls-api").hidePassword(!1)):(a(this).addClass("password-visible"),a("input#yourls-api").showPassword(!1))})}),a("div.yourls-sidebox").find("a.external").attr("target","_blank"),a("tr.setting-item-types").divExists(function(){c=a(this).find("input#yourls-cpt").is(":checked"),c===!0&&a("tr.secondary").show(),c===!1&&(a("tr.secondary").hide(),a("tr.secondary").find("input:checkbox").prop("checked",!1)),a("tr.setting-item-types").on("change","input#yourls-cpt",function(){c=a(this).is(":checked"),c===!0&&a("tr.secondary").fadeIn(700),c===!1&&(a("tr.secondary").fadeOut(700),a("tr.secondary").find("input:checkbox").prop("checked",!1))})}),a("div#yourls-post-display").on("click","input.yourls-api",function(){if(g=a(this).data("post-id"),h=a(this).data("nonce"),""!==g&&""!==h){a("div#wpbody div#message").remove(),a("div#wpbody div#setting-error-settings_updated").remove(),a("div#yourls-post-display").find("span.yourls-spinner").css("visibility","visible"),a("div#yourls-post-display").find("input.yourls-api").attr("disabled","disabled"),f=a("div#yourls-post-display").find("input.yourls-keyw").val();var b={action:"create_yourls",keyword:f,post_id:g,nonce:h};jQuery.post(ajaxurl,b,function(b){a("div#yourls-post-display").find("span.yourls-spinner").css("visibility","hidden"),a("div#yourls-post-display").find("input.yourls-api").removeAttr("disabled");var c;try{c=jQuery.parseJSON(b)}catch(d){yourlsMessage("error",yourlsAdmin.defaultError)}c.success===!0?yourlsMessage("updated",c.message):c.success===!1&&null!==c.message?yourlsMessage("error",c.message):yourlsMessage("error",yourlsAdmin.defaultError),c.success===!0&&null!==c.linkbox&&(a("div#yourls-post-display").find("p.yourls-submit-block").remove(),a("div#yourls-post-display").find("p.yourls-input-block").replaceWith(c.linkbox),a("div#edit-slug-box").append('<input type="hidden" value="'+c.linkurl+'" id="shortlink">'),a("div#edit-slug-box").append(yourlsAdmin.shortSubmit))})}}),a("div#yourls-post-display").on("click","span.yourls-delete",function(){if(g=a(this).data("post-id"),h=a(this).data("nonce"),""!==g&&""!==h){a("div#wpbody div#message").remove(),a("div#wpbody div#setting-error-settings_updated").remove();var b={action:"delete_yourls",post_id:g,nonce:h};jQuery.post(ajaxurl,b,function(b){var c;try{c=jQuery.parseJSON(b)}catch(d){yourlsMessage("error",yourlsAdmin.defaultError)}c.success===!0?yourlsMessage("updated",c.message):c.success===!1&&null!==c.message?yourlsMessage("error",c.message):yourlsMessage("error",yourlsAdmin.defaultError),c.success===!0&&null!==c.yourlsbox&&(a("div#yourls-post-display").find("p.howto").remove(),a("div#yourls-post-display").find("p.yourls-exist-block").replaceWith(c.linkbox),a("div#edit-slug-box").find("input#shortlink").remove(),a("div#edit-slug-box").find('a:contains("Get Shortlink")').remove())})}}),a("div.row-actions").on("click","a.yourls-admin-update",function(b){if(b.preventDefault(),h=a(this).data("nonce"),""!==h&&(g=a(this).data("post-id"),""!==g)){e=a(this).parents("div.row-actions"),d=a(this).parents("tr.entry").find("td.yourls-click");var c={action:"stats_yourls",post_id:g,nonce:h};jQuery.post(ajaxurl,c,function(a){e.removeClass("visible");var b;try{b=jQuery.parseJSON(a)}catch(c){return!1}b.success===!0&&null!==b.clicknm&&d.find("span").text(b.clicknm)})}}),a("div.row-actions").on("click","a.yourls-admin-create",function(b){if(b.preventDefault(),h=a(this).data("nonce"),""!==h&&(g=a(this).data("post-id"),""!==g)){e=a(this).parents("div.row-actions"),d=a(this).parents("div.row-actions").find("span.create-yourls");var c={action:"inline_yourls",post_id:g,nonce:h};jQuery.post(ajaxurl,c,function(a){e.removeClass("visible");var b;try{b=jQuery.parseJSON(a)}catch(c){return!1}b.success===!0&&null!==b.rowactn&&d.replaceWith(b.rowactn)})}}),a("div#yourls-data-refresh").on("click","input.yourls-click-updates",function(){if(h=a("input#yourls_refresh").val(),""!==h){a("div#wpbody div#message").remove(),a("div#wpbody div#setting-error-settings_updated").remove(),a("div#yourls-data-refresh").find("span.yourls-refresh-spinner").css("visibility","visible"),a("div#yourls-data-refresh").find("input.yourls-click-updates").attr("disabled","disabled");var b={action:"refresh_yourls",nonce:h};jQuery.post(ajaxurl,b,function(b){a("div#yourls-data-refresh").find("span.yourls-refresh-spinner").css("visibility","hidden"),a("div#yourls-data-refresh").find("input.yourls-click-updates").removeAttr("disabled");var c;try{c=jQuery.parseJSON(b)}catch(d){yourlsMessage("error",yourlsAdmin.defaultError)}c.success===!0&&""!==c.message?yourlsMessage("updated",c.message):c.success===!1&&null!==c.message?yourlsMessage("error",c.message):yourlsMessage("error",yourlsAdmin.defaultError)})}}),a("div#yourls-data-refresh").on("click","input.yourls-convert",function(){if(h=a("input#yourls_convert").val(),""!==h){a("div#wpbody div#message").remove(),a("div#wpbody div#setting-error-settings_updated").remove(),a("div#yourls-data-refresh").find("span.yourls-convert-spinner").css("visibility","visible"),a("div#yourls-data-refresh").find("input.yourls-convert").attr("disabled","disabled");var b={action:"convert_yourls",nonce:h};jQuery.post(ajaxurl,b,function(b){a("div#yourls-data-refresh").find("span.yourls-convert-spinner").css("visibility","hidden"),a("div#yourls-data-refresh").find("input.yourls-convert").removeAttr("disabled");var c;try{c=jQuery.parseJSON(b)}catch(d){yourlsMessage("error",yourlsAdmin.defaultError)}c.success===!0&&""!==c.message?yourlsMessage("updated",c.message):c.success===!1&&null!==c.message?yourlsMessage("error",c.message):yourlsMessage("error",yourlsAdmin.defaultError)})}})});